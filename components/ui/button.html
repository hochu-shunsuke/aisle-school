<template id="button-template">
  <style>
    :host {
      display: block;
      margin-bottom: var(--spacing-md, 16px);
      text-align: center;
    }
    
    button {
      background-color: var(--color-primary, #2860A0);
      color: var(--color-white, #fff);
      border: 2px solid var(--color-primary, #2860A0);
      border-radius: 4px;
      padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
      font-size: var(--font-size-md, 1rem);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: inline-block;
      text-decoration: none;
      text-align: center;
      box-sizing: border-box;
    }
    
    button:hover {
      background-color: #1e4a7a;
      border-color: #1e4a7a;
    }
    
    button:focus {
      outline: none;
      box-shadow: 0 0 0 3px rgba(40, 96, 160, 0.3);
    }
  </style>
  <button type="button">
    <slot></slot>
  </button>
</template>

<script>
  class ButtonComponent extends HTMLElement {
    constructor() {
      super();
      this.attachShadow({ mode: 'open' });
      
      const template = document.getElementById('button-template');
      if (template) {
        this.shadowRoot.appendChild(template.content.cloneNode(true));
      }
    }
    
    connectedCallback() {
      const button = this.shadowRoot.querySelector('button');
      if (button) {
        button.addEventListener('click', (e) => {
          console.log('Button clicked:', this.textContent.trim());
          // カスタムイベントを発火
          this.dispatchEvent(new CustomEvent('button-click', {
            bubbles: true,
            detail: { text: this.textContent.trim() }
          }));
        });
      }
    }
  }
  
  // カスタム要素として登録
  if (!customElements.get('button-component')) {
    customElements.define('button-component', ButtonComponent);
  }
</script>
